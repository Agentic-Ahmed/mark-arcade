<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Retro Checkers</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        body {
            background-color: #0a0a12;
            color: #fff;
            font-family: 'Press Start 2P', cursive;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            overflow: hidden;
            background:
                radial-gradient(circle at 20% 30%, rgba(233, 69, 96, 0.05) 0%, transparent 40%),
                radial-gradient(circle at 80% 70%, rgba(0, 210, 255, 0.05) 0%, transparent 40%),
                #0a0a12;
        }

        /* Shared Arcade Animations */
        .grid-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                linear-gradient(rgba(233, 69, 96, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(233, 69, 96, 0.05) 1px, transparent 1px);
            background-size: 50px 50px;
            transform: perspective(500px) rotateX(60deg) translateY(-200px);
            z-index: -1;
            animation: moveGrid 20s linear infinite;
        }

        @keyframes moveGrid {
            from {
                background-position: 0 0;
            }

            to {
                background-position: 0 1000px;
            }
        }

        .scanline {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.03) 50%, rgba(255, 255, 255, 0) 100%);
            background-size: 100% 4px;
            z-index: 2000;
            pointer-events: none;
            opacity: 0.15;
            animation: scan 10s linear infinite;
        }

        @keyframes scan {
            from {
                transform: translateY(-100%);
            }

            to {
                transform: translateY(100%);
            }
        }

        .game-wrapper {
            animation: slideUp 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            display: flex;
            flex-direction: column;
            align-items: center;
            background: rgba(22, 33, 62, 0.8);
            padding: 40px;
            border-radius: 20px;
            border: 2px solid #e94560;
            box-shadow: 0 0 50px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        #board {
            display: grid;
            grid-template-columns: repeat(8, 50px);
            grid-template-rows: repeat(8, 50px);
            border: 4px solid #e94560;
        }

        .cell {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .black-cell {
            background-color: #16213e;
        }

        .white-cell {
            background-color: #0f3460;
        }

        .piece {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
        }

        .red-piece {
            background-color: #e94560;
            border: 2px solid #fff;
        }

        .black-piece {
            background-color: #000;
            border: 2px solid #e94560;
        }

        .red-king {
            background-color: #e94560;
            border: 4px double #ffd700;
            position: relative;
        }

        .black-king {
            background-color: #000;
            border: 4px double #ffd700;
            position: relative;
        }

        .red-king::after,
        .black-king::after {
            content: 'K';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #ffd700;
            font-size: 14px;
        }

        .selected {
            border: 4px solid #00d2ff !important;
        }

        .status {
            margin-bottom: 20px;
            font-size: 0.7rem;
            color: #00d2ff;
        }

        .back-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            color: #533483;
            text-decoration: none;
            font-size: 0.7rem;
        }
    </style>
</head>

<body>
    <div class="grid-bg"></div>
    <div class="scanline"></div>

    <a href="/" class="back-btn">
        < BACK</a>

            <div class="game-wrapper">
                <div class="status" id="status">RED'S TURN</div>
                <div id="board"></div>
                <button onclick="location.reload()"
                    style="margin-top: 30px; background: #e94560; color: #fff; border: none; padding: 10px 20px; font-family: inherit; cursor: pointer;">RESET
                    GAME</button>
            </div>

            <script>
                const boardElement = document.getElementById('board');
                const statusElement = document.getElementById('status');
                let board = [];
                let selectedPiece = null;
                let turn = 'red';

                function initBoard() {
                    for (let r = 0; r < 8; r++) {
                        board[r] = [];
                        for (let c = 0; c < 8; c++) {
                            let piece = null;
                            if ((r + c) % 2 !== 0) {
                                if (r < 3) piece = 'black';
                                if (r > 4) piece = 'red';
                            }
                            board[r][c] = piece;
                        }
                    }
                    render();
                }

                function render() {
                    boardElement.innerHTML = '';
                    for (let r = 0; r < 8; r++) {
                        for (let c = 0; c < 8; c++) {
                            const cell = document.createElement('div');
                            cell.className = `cell ${(r + c) % 2 === 0 ? 'white-cell' : 'black-cell'}`;
                            cell.onclick = () => handleCellClick(r, c);

                            if (board[r][c]) {
                                const piece = document.createElement('div');
                                const isKing = board[r][c].includes('king');
                                const type = isKing ? board[r][c] : `${board[r][c]}-piece`;
                                piece.className = `piece ${type}`;
                                if (selectedPiece && selectedPiece.r === r && selectedPiece.c === c) {
                                    piece.classList.add('selected');
                                }
                                cell.appendChild(piece);
                            }
                            boardElement.appendChild(cell);
                        }
                    }
                }

                function handleCellClick(r, c) {
                    if (board[r][c] && board[r][c].startsWith(turn)) {
                        selectedPiece = { r, c };
                    } else if (selectedPiece) {
                        if (isValidMove(selectedPiece.r, selectedPiece.c, r, c)) {
                            makeMove(selectedPiece.r, selectedPiece.c, r, c);
                            selectedPiece = null;
                            turn = turn === 'red' ? 'black' : 'red';
                            statusElement.innerText = `${turn.toUpperCase()}'S TURN`;
                        }
                    }
                    render();
                }

                function isValidMove(fromR, fromC, toR, toC) {
                    if (board[toR][toC]) return false;
                    const piece = board[fromR][fromC];
                    const isKing = piece.includes('king');
                    const dr = toR - fromR;
                    const dc = Math.abs(toC - fromC);
                    const direction = turn === 'red' ? -1 : 1;

                    // Standard move
                    if (dc === 1) {
                        if (isKing && Math.abs(dr) === 1) return true;
                        if (!isKing && dr === direction) return true;
                    }

                    // Capture move
                    if (dc === 2) {
                        const canJump = isKing ? (Math.abs(dr) === 2) : (dr === 2 * direction);
                        if (canJump) {
                            const midR = fromR + (dr / 2);
                            const midC = fromC + (toC - fromC) / 2;
                            const jumpedPiece = board[midR][midC];
                            if (jumpedPiece && !jumpedPiece.startsWith(turn)) {
                                board[midR][midC] = null; // Capture
                                return true;
                            }
                        }
                    }
                    return false;
                }

                function makeMove(fromR, fromC, toR, toC) {
                    let piece = board[fromR][fromC];

                    // Promotion logic
                    if (turn === 'red' && toR === 0) piece = 'red-king';
                    if (turn === 'black' && toR === 7) piece = 'black-king';

                    board[toR][toC] = piece;
                    board[fromR][fromC] = null;
                }

                initBoard();
            </script>
</body>

</html>